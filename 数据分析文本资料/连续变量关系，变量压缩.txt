多元统计基础与变量约减的思路（连续变量）
主成分分析
因子分析
稀疏主成分分析
变量聚类

1.如果Y是连续的，用回归模型。
2. 如果Y是分类的，用分类模型。

主成分分析只能用于连续变量进行变量压缩！！！
目的是构造输入变量的少数线形组合，尽量能解释数据的变异性。代表信息量包括方差和极差。

主成分个数的选取原则：（所有的X都必须进行中心标准化！！！）
标准化：每个X-X的均值/X的标准差
单个主成分解释的变异不应该小于1。比如选取3个主成分，第三个主成分解释的变异相当于一个原始变量的变异。
选取的主成分累积的解释变异达到80%-90%

分类变量不能进行变量的压缩！！！
（分类变量之间如果相关性较高，可以进行WOE转化，再压缩，但必须在有预测值的情况下，如果是聚类问题那是不行的）

压缩后的变量非常难解释

优点
不要求数据呈正态分布，主成分就是按数据离散程度最大的方向对基组进行旋转，这特性扩展了其应用范围，比如，用于人脸识别
通过对原始变量进行综合与简化，可以客观地确定各个指标的权重，避免主观判断的随意性
缺点
主成分分析适用于变量间有较强相关性的数据，若原始数据相关性弱，则起不到很好的降维作用
降维后，存在少量信息丢失，不可能包含100%原始数据
原始数据经过标准化处理之后，含义会发生变化，且主成分的解释含义较原始数据比较模糊
假设标准化后的原始变量间存在多重共线性，即原始变量之间存在不可忽视的信息重叠，主成分分析不能有效剔除信息重叠


因子分析
1.变量之间的相关系数，作主成分分析，确定保留因子的数量。
2. 进行因子分析，一定是放入连续变量。

因子的特点：

因子个数远远少于原始变量个数
因子并非原始变量的简单取舍，而是一种新的综合
因子之间没有线性关系
因子具有明确解释性，可以最大限度地发挥专业分析的作用


变量聚类
变量聚类实际上做的是变量缩减，它可以通过减少冗余变量的个数，损失少量信息的情况下提升模型的训练速度和模型效果。


WOE，即证据权重（Weight of Evidence），WOE 是对原始自变量的一种编码形式。要对一个变量进行 WOE 编码，需要首先把这个变量进行分组处理（也叫离散化、分箱）

数据分箱的重要性及优势：

离散特征的增加和减少都很容易，易于模型的快速迭代；
稀疏向量内积乘法运算速度快，计算结果方便存储，容易扩展；
离散化后的特征对异常数据有很强的鲁棒性：比如一个特征是年龄>30是1，否则0。如果特征没有离散化，一个异常数据“年龄300岁”会给模型造成很大的干扰；
逻辑回归属于广义线性模型，表达能力受限；单变量离散化为N个后，每个变量有单独的权重，相当于为模型引入了非线性，能够提升模型表达能力，加大拟合；
离散化后可以进行特征交叉，由M+N个变量变为M*N个变量，进一步引入非线性，提升表达能力；
特征离散化以后，起到了简化了逻辑回归模型的作用，降低了模型过拟合的风险。

先用X与Y做卡方检验之后再进行WOE。
 # ## 筛选预测能力强的变量

# **WoE类参数说明**:
# + **qnt_num**:int,等频分箱个数,默认16
# + **min_block_size**:int,最小观测数目，默认16
# + **spec_values**:dict,若为分类自变量，指派替换值
# + **v_type**:str,自变量类型,分类:‘d’,连续变量:‘c’，默认'c'
# + **bins**:list,预定义的连续变量分箱区间
# + **t_type**:str,目标变量类型,二分类:‘b’,连续变量:‘c’，默认'b'

# **WoE类重要方法**:
# 
# + **plot**:绘制WOE图
# + **transform**:转换数据为WOE数据
# + **fit_transform**:转换数据为WOE数据
# + **optimize**:连续变量使用最优分箱

# **WoE类重要属性**:
变量分箱（即变量离散化）往往是较为核心一环。变量分箱的优劣往往会影响模型评分效果。
# + **bins**:分箱结果汇总
# + **iv**:变量的信息价值

# ## 根据IV值筛选变量 - 分类变量